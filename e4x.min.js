//@source http://purl.eligrey.com/github/e4x.js/blob/master/e4x.js
"use strict";(function(a){var i=document,e="application/xml",h=new DOMParser,b=new XMLSerializer,d=function(o){var l=h.parseFromString("<"+o.localName+"/>",e),q=l.documentElement,p=o.childNodes,n=p.length,k=o.attributes,m=k.length;while(m--){q.setAttributeNode(l.adoptNode(k.item(0)))}for(m++;m<n;m++){q.appendChild(l.adoptNode(p[m]))}return l},j=h.parseFromString("<x/>",e),g=/^[\w\-]+\s*/,f=function(m){var q;switch(m.nodeKind()){case"element":var l=m.attributes(),o=m.children(),k=o.length(),r=l.length(),n,p;q=j.createElementNS(m.namespace().uri,m.localName());if(r!==0){for(n=0;n<r;n++){p=l[n];q.setAttributeNS(p.namespace().uri,p.localName(),p.toString())}}if(k!==0){for(n=0;n<k;n++){q.appendChild(f(o[n]))}}return q;case"text":return j.createTextNode(m.toString());case"comment":return j.createComment(m.toString().slice(4,-3));case"processing-instruction":return j.createProcessingInstruction(m.localName(),m.toString().slice(2,-2).replace(g,""));case"attribute":(q=j.createAttributeNS(m.namespace().uri,m.localName())).nodeValue=m.toString();return q}},c=function(k){for(var l in k){if(k.hasOwnProperty(l)&&!a.prototype.function::[l]){a.prototype.function::[l]=k[l]}}};c({domNode:function(){if(this.length()===1){return i.adoptNode(f(this))}},domNodeList:function(){var l=i.createDocumentFragment();for(var m=0,k=this.length();m<k;m++){l.appendChild(this[m].domNode())}return i.adoptNode(l).childNodes},xpath:function(p){var o=new XMLList,k=this.length();if(k!==1){for(var n=0,k=k;n<k;n++){o+=this[n].xpath(p)}return o}var m=d(this.domNode()),l=m.evaluate(p,m.documentElement,m.createNSResolver(m.documentElement),XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),q;while(q=l.iterateNext()){o+=new a(b.serializeToString(q))}return o}})}(XML));
