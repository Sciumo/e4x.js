//@source http://github.com/eligrey/e4x.js/blob/master/e4x.js
(function(){var f=document,c="application/xml",g=new DOMParser(),a=new XMLSerializer(),e=g.parseFromString("<x/>",c),d=/<\?[\w\-]+|\?>/g,b=function(h){if(typeof h!=="xml"){return false}if(!!h.length()){try{h[0]=h[0]}catch(i){return false}}return true};XML.prototype.function::domNode||(XML.prototype.function::domNode=function(){var i=XML.prettyPrinting,h;switch(this.nodeKind()){case"element":XML.prettyPrinting=false;h=f.adoptNode(g.parseFromString(this.toXMLString(),c).documentElement);XML.prettyPrinting=i;return h;case"text":return f.createTextNode(this.toString());case"comment":h=this.toString();return f.createComment(h.substr(4,h.length-7));case"processing-instruction":return f.adoptNode(e.createProcessingInstruction(this.localName(),this.toString().replace(d,"")));case"attribute":(h=f.createAttributeNS(this.name().uri||null,this.localName())).nodeValue=this.toString();return h}});XML.prototype.function::domNodeList||(XML.prototype.function::domNodeList=function(){var j=f.createDocumentFragment(),h=this.length(),k=0;for(;k<h;k++){j.appendChild(this[k].domNode())}return j.childNodes});XML.prototype.function::xpath||(XML.prototype.function::xpath=function(o){var n;if(b(this)){n=new XMLList();for(var m=0,j=this.length();m<j;m++){n+=this[m].xpath(o)}return n}var p=XML.prettyPrinting;XML.prettyPrinting=false;var l=g.parseFromString(this.toXMLString(),c),k=l.evaluate(o,l.documentElement,l.createNSResolver(l.documentElement),XPathResult.ANY_TYPE,null),h;XML.prettyPrinting=p;switch(k.resultType){case XPathResult.ORDERED_NODE_ITERATOR_TYPE:case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:n=new XMLList();h=k.iterateNext();while(h){n+=h.xml();h=k.iterateNext()}break;case XPathResult.NUMBER_TYPE:n=k.numberValue;break;case XPathResult.STRING_TYPE:n=k.stringValue;break;case XPathResult.BOOLEAN_TYPE:n=k.booleanValue;break}return n});XML.ignoreComments=XML.ignoreProcessingInstructions=false;if(typeof XML.preserveCDATA!=="undefined"){XML.preserveCDATA=true}XML.namespaces={XHTML:new Namespace("xhtml","http://www.w3.org/1999/xhtml"),XHTML2:new Namespace("xhtml","http://www.w3.org/2002/06/xhtml2/"),MATHML:new Namespace("mml","http://www.w3.org/1998/Math/MathML"),SVG:new Namespace("svg","http://www.w3.org/2000/svg"),XLINK:new Namespace("xlink","http://www.w3.org/1999/xlink"),XFORMS:new Namespace("xf","http://www.w3.org/2002/xforms"),XFRAMES:new Namespace("xframes","http://www.w3.org/2002/06/xframes/"),XML_EVENTS:new Namespace("ev","http://www.w3.org/2001/XML-events")};Node.prototype.xml||(Node.prototype.xml=function(){return new XML(a.serializeToString(this))});NodeList.prototype.xml||(NodeList.prototype.xml=function(){var k=new XMLList(),h=this.length,j=0;for(;j<h;j++){k+=this.item(j).xml()}return k})}());
