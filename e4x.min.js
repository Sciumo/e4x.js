//@source http://github.com/eligrey/e4x.js/blob/master/e4x.js
typeof XML!=="undefined"&&(function(a){var e=a.prototype,g=document,c="application/xml",f=new DOMParser(),b=new XMLSerializer(),h=f.parseFromString("<x/>",c),i=/<\?[\w\-]+|\?>/g,d=function(j){if(typeof j!=="xml"){return false}if(!!j.length()){try{j[0]=j[0]}catch(k){return false}}return true};e.function::domNode||(e.function::domNode=function(){var j;switch(this.nodeKind()){case"element":var k=a.prettyPrinting;a.prettyPrinting=false;j=g.adoptNode(f.parseFromString(this.toXMLString(),c).documentElement);a.prettyPrinting=k;return j;case"text":return g.createTextNode(this.toString());case"comment":j=this.toString();return g.createComment(j.substr(4,j.length-7));case"processing-instruction":return g.adoptNode(h.createProcessingInstruction(this.localName(),this.toString().replace(i,"")));case"attribute":(j=g.createAttributeNS(this.name().uri||null,this.localName())).nodeValue=this.toString();return j}});e.function::domNodeList||(e.function::domNodeList=function(){var j=g.createDocumentFragment(),k=this.length();while(k--){j.appendChild(this[k].domNode())}return j.childNodes});e.function::xpath||(e.function::xpath=function(n){var m;if(d(this)){m=new XMLList();var l=this.length();while(l--){m=this[l].xpath(n)+m}return m}var p=a.prettyPrinting;a.prettyPrinting=false;var k=f.parseFromString(this.toXMLString(),c),j=k.evaluate(n,k.documentElement,k.createNSResolver(k.documentElement),XPathResult.ANY_TYPE,null);a.prettyPrinting=p;switch(j.resultType){case XPathResult.ORDERED_NODE_ITERATOR_TYPE:case XPathResult.UNORDERED_NODE_ITERATOR_TYPE:m=new XMLList();var o;while(o=j.iterateNext()){m+=o.xml()}break;case XPathResult.NUMBER_TYPE:m=j.numberValue;break;case XPathResult.STRING_TYPE:m=j.stringValue;break;case XPathResult.BOOLEAN_TYPE:m=j.booleanValue;break}return m});a.ignoreComments=a.ignoreProcessingInstructions=false;a.namespaces={XHTML:new Namespace("xhtml","http://www.w3.org/1999/xhtml"),XHTML2:new Namespace("xhtml","http://www.w3.org/2002/06/xhtml2/"),MATHML:new Namespace("mml","http://www.w3.org/1998/Math/MathML"),SVG:new Namespace("svg","http://www.w3.org/2000/svg"),XLINK:new Namespace("xlink","http://www.w3.org/1999/xlink"),XFORMS:new Namespace("xf","http://www.w3.org/2002/xforms"),XFRAMES:new Namespace("xframes","http://www.w3.org/2002/06/xframes/"),XML_EVENTS:new Namespace("ev","http://www.w3.org/2001/XML-events")};Node.prototype.xml||(Node.prototype.xml=function(){return new a(b.serializeToString(this))});NodeList.prototype.xml||(NodeList.prototype.xml=function(){var k=new XMLList(),j=this.length;while(j--){k=this.item(j).xml()+k}return k})}(XML));
